alias{
    ll='ls -oF -l $*',
    clear='cls',
    clj='java -Dfile.encoding=utf-8 -cp ~/.clojure/clojure-1.6.0.jar clojure.main $*',
    lein2='lein',
}

nyagos.alias('touch', function(args)
    if #args <= 0 then
        print 'Usage: touch FILENAME'
        return
    end
    
    local fd = io.open(args[1])
    
    if fd then
        fd:close()
    else
        io.open(args[1], 'w'):close()
    end
end)

nyagos.alias('uru', function(args)
    local uruargs = { 'uru_rt' }
    for index, value in ipairs(args) do
        table.insert(uruargs, '"'..value..'"')
    end
    
    nyagos.setenv('URU_INVOKER', 'batch')
    
    local ok, err = nyagos.exec(table.concat(uruargs, ' '))
    if not ok then
        print(err)
        return
    end
    
    local uruhome = os.getenv('URU_HOME')
    if not uruhome then
        uruhome = os.getenv('USERPROFILE')..'\\.uru'
    end
    
    local urulackee = uruhome..'\\uru_lackee.bat'
    local fd = io.open(urulackee, 'r')
    if not fd then return end
    
    for line in fd:lines() do
        local name, value = string.match(line, '^SET%s+([%w_]+)=(.*)$')
        if name then
            nyagos.setenv(name, value)
        end
    end
    
    io.close(fd)
end)
